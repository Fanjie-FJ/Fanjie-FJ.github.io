<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>实用操作系统笔记（三） | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="10.23课前复习 1.页式管理系统参考题目在某页式虚存储系统中，假定访问内存的时间是10ms，平均缺页中断处理时间按为25ms，平均缺页中断率为5%。(1) 试计算在该虚存储系统中，平均有效访问时间是多少?(2)使用TLB，TLB访问时间忽略不计，TLB的命中率为70%，试计算该系统中平均有效访问时间是多少? 地址映射有两条路径： （1）页表    P=1    虚拟地址-》页号-》页表（10m">
<meta property="og:type" content="article">
<meta property="og:title" content="实用操作系统笔记（三）">
<meta property="og:url" content="http://yoursite.com/2019/10/23/2019.10.23课前复习/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="10.23课前复习 1.页式管理系统参考题目在某页式虚存储系统中，假定访问内存的时间是10ms，平均缺页中断处理时间按为25ms，平均缺页中断率为5%。(1) 试计算在该虚存储系统中，平均有效访问时间是多少?(2)使用TLB，TLB访问时间忽略不计，TLB的命中率为70%，试计算该系统中平均有效访问时间是多少? 地址映射有两条路径： （1）页表    P=1    虚拟地址-》页号-》页表（10m">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-10-23T09:29:08.175Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="实用操作系统笔记（三）">
<meta name="twitter:description" content="10.23课前复习 1.页式管理系统参考题目在某页式虚存储系统中，假定访问内存的时间是10ms，平均缺页中断处理时间按为25ms，平均缺页中断率为5%。(1) 试计算在该虚存储系统中，平均有效访问时间是多少?(2)使用TLB，TLB访问时间忽略不计，TLB的命中率为70%，试计算该系统中平均有效访问时间是多少? 地址映射有两条路径： （1）页表    P=1    虚拟地址-》页号-》页表（10m">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-2019.10.23课前复习" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/10/23/2019.10.23课前复习/" class="article-date">
  <time datetime="2019-10-23T09:30:37.000Z" itemprop="datePublished">2019-10-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      实用操作系统笔记（三）
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>10.23课前复习</strong></p>
<h3 id="1-页式管理系统"><a href="#1-页式管理系统" class="headerlink" title="1.页式管理系统"></a>1.页式管理系统</h3><p><em>参考题目</em><br><em>在某页式虚存储系统中，假定访问内存的时间是10ms，平均缺页中断处理时间按为25ms，平均缺页中断率为5%。</em><br><em>(1) 试计算在该虚存储系统中，平均有效访问时间是多少?</em><br><em>(2)使用TLB，TLB访问时间忽略不计，TLB的命中率为70%，试计算该系统中平均有效访问时间是多少?</em></p>
<p><strong>地址映射有两条路径：</strong></p>
<p>（1）<strong>页表</strong>    P=1    虚拟地址-》页号-》页表（<strong>10ms</strong>）-》页表项-》帧号-》物理地址-》内存访问（<strong>10ms</strong>）    <strong><em>总共55ms，概率为5%</em></strong></p>
<p>（2）<strong>缺页</strong>    P=0    虚拟地址-》页号-》页表（<strong>10ms</strong>）-》页表项（P=0）-》缺页中断-》进程堵塞-》OS发送IO请求、IO响应、IO完成（中断处理  <strong>25ms</strong>）-》进程就绪-》再调度-》虚拟地址-》页号-》页表（<strong>10ms</strong>）-》页表项（P=1）-》帧号-》物理地址-》内存访问（<strong>10ms</strong>）    <strong><em>总共55ms，概率为5%</em></strong></p>
<p><strong>平均有效访问时间</strong>    avg（T）=segma（pi+i）=20x（1-5%）+55x5%=21.75ms</p>
<p><strong><em>！！！加入TLB    不影响缺页率！！！</em></strong></p>
<p><strong>地址映射有三条路径：</strong></p>
<p>（1）<strong>TLB</strong>     虚拟地址-》页号-》TLB中的页表项（0ms）-》帧号-》物理地址-》内存访问（10ms）    <strong><em>总共10ms，概率为70%</em></strong></p>
<p>（2）<strong>页表</strong>    同上20ms        <strong><em>概率为95%-70%=25%</em></strong></p>
<p>（3）<strong>缺页</strong>    同上55ms        <strong><em>概率为5%</em></strong></p>
<p><strong><em>TLB概率=TLB命中次数/（总次数）</em></strong></p>
<p><strong><em>总次数=TLB命中+页表（P=1）+缺页</em></strong></p>
<p><strong>平均有效访问时间</strong>    avg（T）=segma（pi+i）=10x70%+20x25%+55x5%=14.75ms</p>
<h3 id="2-二级页表"><a href="#2-二级页表" class="headerlink" title="2.二级页表"></a>2.二级页表</h3><p><strong>实质：</strong>页表的页表（对页表进行页式管理-》有部分页表可以不再内存中）<br><em>进程=》页式管理=》部分加载=》每个进程一个页表（页表可能很大）页表进行页式管理=》二级页表</em><br><em>虚拟地址=页号1+页号2+页内偏移量</em><br><strong>地址映射=映射1+映射2</strong><br><em>映射1=》页号1+页号2（当成页内偏移量）=》找到该虚拟地址所对应页表项所在的页表</em><br><em>映射2=》映射1找到的地址（页表项所在页的首地址）+页内偏移量=》页表项=》帧=》物理地址</em></p>
<h3 id="3-倒排页表"><a href="#3-倒排页表" class="headerlink" title="3.倒排页表"></a>3.倒排页表</h3><p><em>物理内存=》页表=》与进程数量和大小无关=》和内存大小、页帧大小相关</em><br><em>页帧的对应关系</em><br><strong><em>！！！整个系统只有一个倒排页表！！！</em></strong><br><em>进程分页时候每个进程都是从0开始序列编号</em><br><em>多个进程可能有相同的页号</em><br><em>倒排页表存储：页号，进程ID</em><br><em>M：1的映射，存储：链指针（用来管理具有相同映射值的页的页表项）</em></p>
<p>多个页号或不同进程的相同页号会映射到同一个帧-》存储冲突-》不能覆盖-》散列-》线性散列、链的溢出-》快速找到具有相同映射值的页-》链表指针</p>
<p>Hash<br>线性散列<br>链表溢出<br>地址映射<br>虚拟地址、进程ID=》页号=》Hash=》映射值=》指向页表的某个位置=》+进程ID=》判断该页表项是否需要要找到=》是=》帧=》物理地址<br>否=》按照散列方式进行查找（顺着链表指针）=》页号+进程ID的匹配=》找到页表项=》帧=物理地址</p>
<p><strong>页表代价（使用页表产生的性能代价）：</strong>一次内存访问=》变成两次=》页表+内存</p>
<p><strong>性能提升方法：</strong><br>（1）    TLB：3条路径，见上题<br>（2）    Cache:2条路径，cache+内存</p>
<p><strong>TLB+Cache组合：5条路径</strong></p>
<p>（1）TLB+Cache    （2）TLB+内存    （3）页表+Cache    （4）页表+内存    （5）缺页+内存</p>
<p>页尺寸：优缺点<br>页尺寸，缺页率：开口向下的抛物线<br>分配给进程的帧的大小，缺页率：<strong>双曲线</strong><br>工作集 </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/10/23/2019.10.23课前复习/" data-id="ck32m7okq0003gcvz5803vvh8" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/10/28/2019.10.28课前复习/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          实用操作系统笔记（四）
        
      </div>
    </a>
  
  
    <a href="/2019/10/21/2019.10.21课前复习/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">实用操作系统笔记（二）</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/11/17/面试题3——数组中的重复数字/">剑指Offer笔记</a>
          </li>
        
          <li>
            <a href="/2019/11/11/2019.11.11课前复习/">实用操作系统笔记（五）</a>
          </li>
        
          <li>
            <a href="/2019/10/28/2019.10.28课前复习/">实用操作系统笔记（四）</a>
          </li>
        
          <li>
            <a href="/2019/10/23/2019.10.23课前复习/">实用操作系统笔记（三）</a>
          </li>
        
          <li>
            <a href="/2019/10/21/2019.10.21课前复习/">实用操作系统笔记（二）</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>